<!DOCTYPE html>
<html lang="en" ng-app="napkinCalculatorApp">
<head>
    <meta charset="UTF-8">
    <title>Napkin Calculator</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
    <!--<link rel="stylesheet" type="text/css" href="lumen/bootstrap.min.css"/>-->
    <!--<link rel="stylesheet" type="text/css" href="flatly/bootstrap.min.css"/>-->
    <link rel="stylesheet" type="text/css" href="bs-callouts.css"/>
    <style>
        body {
            padding-top: 65px
        }
    </style>
</head>
<body ng-controller="NapkinCalcCtrl as calculator">
<!-- TODO: complete the toolbar -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Napkin Calculator</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Rental Calculator <span class="sr-only">(current)</span></a></li>
                <li><a href="#">Compare Properties</a></li>
            </ul>
            <!--<form class="navbar-form navbar-left">-->
                <!--<div class="form-group">-->
                    <!--<input type="text" class="form-control" placeholder="Search">-->
                <!--</div>-->
                <!--<button type="submit" class="btn btn-default">Submit</button>-->
            <!--</form>-->
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#">Log In</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Sign Up<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Another action</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">Separated link</a></li>
                    </ul>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>
<div class="container">
    <h2> Prototype Napkin Calculator for Real Estate </h2>
    <!-- TODO: user needs to be able to optionally add details about the property -->
    <div class="row">
        <div class="container form-group form-inline">
            <div class="input-group">
                <input type="text" class="form-control" style="border-radius: 4px"
                       ng-model="calculator.model.name" placeholder="Property Description"/>
            </div>
            <div class="btn-group" role="group" aria-label="...">
                <button type="button" class="btn btn-primary" ng-click="calculator.saveCurrentModel()">Save</button>

                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Load Properties <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li ng-repeat="(name, savedModel) in calculator.savedModels">
                            <a href ng-click="calculator.loadModel(savedModel)">{{name}}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-4">
            <div class="panel panel-default">
                <div class="panel-heading">Major Costs</div>
                <div class="panel-body">
                    <div class="form-group ">Purchase Price
                        <div class="input-group">
                            <div class="input-group-addon ">$</div>
                            <input type="number" class="form-control"  step="100" ng-model="calculator.model.propertyPrice" />
                        </div>
                    </div>
                    <div class="form-group ">Down Payment ({{calculator.model.downPaymentPct}}%)
                        <div class="input-group">
                            <div class="input-group-addon ">$</div>
                            <input type="number" class="form-control" disabled ng-model="calculator.downPaymentAmt()" />
                        </div>
                    </div>
                    <div class="form-group ">Mortgage
                        ({{calculator.model.loanDurationYears}} yrs @ {{calculator.model.interestPct}}%)
                        <div class="input-group">
                            <div class="input-group-addon ">$</div>
                            <input type="number" class="form-control" disabled ng-model="calculator.mortgagePayment()" />
                        </div>
                    </div>
                    <div class="form-group ">Expected HOA
                        <div class="input-group">
                            <div class="input-group-addon ">$</div>
                            <input type="number" class="form-control" ng-model="calculator.model.expectedHOA" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-8 col-sm-8">
            <div class="panel panel-default">
                <div class="panel-heading">Income and Maintenance</div>
                <div class="panel-body">
                    <div class="col-md-12 col-sm-12">
                        <div class="form-group ">Expected rent
                            <div class="input-group">
                                <div class="input-group-addon ">$</div>
                                <input type="number" class="form-control" step="50" ng-model="calculator.model.expectedRent" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6">
                        <div class="form-group ">Expected Home Insurance
                            <div class="input-group">
                                <div class="input-group-addon ">$</div>
                                <input type="number" class="form-control" ng-model="calculator.model.expectedInsurance" />
                            </div>
                        </div>
                        <div class="form-group ">Expected Prop Taxes
                            <div class="input-group">
                                <div class="input-group-addon ">$</div>
                                <input type="number" class="form-control" ng-model="calculator.model.expectedPropTaxes" />
                            </div>
                        </div>
                        <div class="form-group ">Expected Vacancy Rate
                            <div class="input-group">
                                <input type="number" class="form-control" ng-model="calculator.model.expectedVacancyPct" />
                                <div class="input-group-addon ">%</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6">
                        <div class="form-group ">Management ({{calculator.model.managementCostPct*100}}%)
                            <div class="input-group">
                                <div class="input-group-addon ">$</div>
                                <input type="number" class="form-control" disabled ng-model="calculator.managementCost()" />
                            </div>
                        </div>
                        <div class="form-group ">Repair & CapEx Fund
                            ({{calculator.model.repairFundPct + calculator.model.capExPct}}% )
                            <div class="input-group">
                                <div class="input-group-addon ">$</div>
                                <input type="number" class="form-control"
                                       ng-model="calculator.repairFund()" disabled/>
                            </div>
                        </div>
                        <div class="form-group ">Vacancy fund
                            <div class="input-group">
                                <div class="input-group-addon ">$</div>
                                <input type="number" class="form-control" disabled
                                       ng-model="calculator.vacancyAllowance()" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4 col-sm-4">
            <div class="bs-callout bs-callout-info">
                <h1 class="text-{{calculator.cashOnCashReturn() > 0? 'success' : 'danger'}}">
                    <strong>{{calculator.cashOnCashReturn()}}</strong>%
                </h1>
                <footer>Cash on Cash Return</footer>
            </div>
        </div>
        <div class="col-md-4 col-sm-4">
            <div class="bs-callout bs-callout-info">
                <h3 class="text-{{calculator.cashFlow() > 0? 'success' : 'danger'}}">
                    ${{calculator.cashFlow()}}
                </h3>
                <footer>Monthly Cash Flow</footer>
            </div>
        </div>
        <div class="col-md-4 col-sm-4">
            <div class="bs-callout bs-callout-info">
                <h3 class="text-{{calculator.netAnnualIncome() > 0? 'success' : 'danger'}}">
                    ${{calculator.netAnnualIncome()}}
                </h3>
                <footer>Net Annual Income</footer>
            </div>
        </div>
        <!-- Cap rate commented out -->
        <!--<div class="col-md-4 col-sm-4">-->
            <!--<blockquote>-->
                <!--<h3 class="text-{{calculator.capitalizationRate() > 0? 'success' : 'danger'}}">-->
                    <!--{{calculator.capitalizationRate()}}%-->
                <!--</h3>-->
                <!--<footer>Capitalization Rate</footer>-->
            <!--</blockquote>-->
        <!--</div>-->
    </div>


    <p>Initial investment doubles approx every <strong>{{calculator.doublerYears()}}</strong> years!</p>

    <hr>
    <div>
        <div class="row">
            <div class="col-md-4 col-sm-6" ng-repeat="(name, savedModel) in calculator.savedModels">
                <div class="panel panel-primary">
                    <div class="panel-heading"><h3>{{name}}</h3></div>
                    <div class="panel-body">
                        <p>Purchase Price: <strong>${{savedModel.propertyPrice}}</strong></p>
                        <p class="text-danger">Down Payment (<span>{{savedModel.downPaymentPct}}</span>%): <strong>${{savedModel.downPaymentAmt}}</strong></p>
                        <p class="text-success">Cash Flow: <strong>${{savedModel.cashFlow}}</strong></p>
                        <div class="bs-callout bs-callout-info">
                            <h3 class="text-{{savedModel.cashOnCashReturn > 0? 'success' : 'danger'}}">
                                <strong>{{savedModel.cashOnCashReturn}}</strong>%
                            </h3>
                            <footer>Cash on Cash Return</footer>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <button class="btn btn-primary" ng-click="calculator.loadModel(savedModel)">Load into Calculator</button>
                        <button class="btn btn-danger" ng-click="calculator.removeModel(savedModel)">Remove</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="calculator.js"></script>
</body>
</html>